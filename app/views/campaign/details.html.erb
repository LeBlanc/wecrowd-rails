<h1><%= @campaign.name %></h1>

<div class="row">
  <%= form_tag("/campaign/edit/#{@campaign.id}", :class => 'span3') do %>

  <p>The public URL for your campaign is <strong><a href="<%= request.protocol + request.host + ':' + request.port.to_s %>/campaign/<%= @campaign.id %>"><%= request.host %>/campaign/<%= @campaign.id %></a></strong></p>
  <legend>Edit Campaign Details</legend>
  <div class="form-group">
    <label for="email">Campaign Name:</label>
    <%= text_field_tag(:campaign_name, @campaign.name, :class => 'text form-control', :placeholder => 'Coffee for Everyone!', :maxlength => 255) %>
  </div>

  <div class="form-group">
    <label for="email">Campaign Description:</label>
    <%= text_field_tag(:campaign_description, @campaign.description, :class => 'text form-control', :placeholder => 'Let\'s supply coffee to the overworked people.') %>
  </div>

  <div class="form-group">
    <label for="email">Donation Goal:</label>
    <%= text_field_tag(:campaign_goal, @campaign.goal, :class => 'text form-control', :placeholder => '$5,000', :maxlength => 10) %>
  </div>

  <div class="form-group">
    <label for="email">Account Type:</label>
    <%= select_tag(:account_type, options_for_select({ "Individual" => "personal", "Business" =>"business", "Non-profit" => "nonprofit"}, @campaign.account_type), :class => 'text form-control', :placeholder => '$5,000', :maxlength => 10) %>
  </div>

  <div class="form-group">
    <button type="submit" class="btn btn-success">Edit</button>
  </div>

  <% end %>
  
  <div class="span9">
    <legend>Payments</legend>
    <% if @payments.length > 0 %>
        <table class="table tablesorter table-hover">
          <thead>
            <tr>
              <th>ID</th>
              <th>Date</th>
              <th>Payer Name</th>
              <th>Payer Email</th>
              <th>State</th>
              <th>Amount</th>
              <th>WePay Fee</th>
            </tr>
          </thead>

          <tbody>
            <% @payments.each do |p| %>
              <tr>
                <td><%= p.id %></td>
                <td><%= p.created_at.strftime("%Y/%m/%d %I:%M%P %Z") %></td>
                <td><%= p.payer_name %></td>
                <td><%= p.payer_email %>
                <td><%= p.state %></td>
                <td><%= p.amount %></td>
                <td><%= p.wepay_fee %></td>
              </tr>
            <% end %>
          </tbody>      
        </table>
        <% else %>
          <p>No payments received yet.</p>
        <% end %>
      </div>
    </div>
    
  </div>
</div>